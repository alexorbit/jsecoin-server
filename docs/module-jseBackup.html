<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: jseBackup</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: jseBackup</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Secondary backup and json data storage functions, used only by controller.js
<h5>Exported</h5>
	<ul>
		<li>runAtMidnight</li>
		<li>runAtMidday</li>
		<li>cleanNulls</li>
		<li>backupLedger</li>
		<li>resetBlockChainFile</li>
		<li>storeLogs</li>
	</ul></div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~%3Ch2%3EbackupLedger%3C/h2%3E"><span class="type-signature">(inner) </span><h2>backupLedger</h2><span class="signature">(ledger)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Backs up the current ledger of user balances to a JSON file in the data directory
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ledger</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the current working ledger</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line162">line 162</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3EcancelSubscription%3C/h2%3E"><span class="type-signature">(inner) </span><h2>cancelSubscription</h2><span class="signature">(uidSale)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Cancell a subscription and notify both the seller and purchaser
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>uidSale</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">merchantSales/ object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line142">line 142</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3EcleanNulls%3C/h2%3E"><span class="type-signature">(inner) </span><h2>cleanNulls</h2><span class="signature">(firebaseObject)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    moves all object data to an array and removes any null values
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>firebaseObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">this was from back when firebase was causing us formatting issues</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line62">line 62</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>is this required/used now?</li>
        </ul>
    </dd>
    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3EprocessSubscription%3C/h2%3E"><span class="type-signature">(inner) </span><h2>processSubscription</h2><span class="signature">(uidSale)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Process any due and valid subscriptions via apiTransfer
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>uidSale</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">merchantSales/ object due for processing</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line108">line 108</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3EresetBlockChainFile%3C/h2%3E"><span class="type-signature">(inner) </span><h2>resetBlockChainFile</h2><span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Finalizes the blockchain json file every time the blockchain hits 999 blocks
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line174">line 174</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3ErunAtMidday%3C/h2%3E"><span class="type-signature">(inner) </span><h2>runAtMidday</h2><span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Runs subscription payments and notifications at midday each day
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line41">line 41</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3ErunAtMidnight%3C/h2%3E"><span class="type-signature">(inner) </span><h2>runAtMidnight</h2><span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Resets daily stats at midnight each night, publicStats are pushed to dailyPublicStats
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line19">line 19</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3ErunSubscriptions%3C/h2%3E"><span class="type-signature">(inner) </span><h2>runSubscriptions</h2><span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Gather subscriptions information from merchantSales and send out warning email if due tomorrow
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line78">line 78</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~%3Ch2%3EstoreLogs%3C/h2%3E"><span class="type-signature">(inner) </span><h2>storeLogs</h2><span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Secondary backup facility, jseBackup.storeLogs(); is called from the modules/blockchain.js file every 30 seconds.
		If we change the block time we need to change the  && rightNow.getSeconds() >= 29 bit
		Uses setTimouts to log data and distribute memory allocation. Not optimized because data is constantly duplicated.
		Need to really append new data as opposed to making hundreds of files.
		Uses A an B files using fileAddition so that if one file gets corrupted during writing out we have the previous one.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="modules_backup.js.html">modules/backup.js</a>, <a href="modules_backup.js.html#line188">line 188</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-jseAPI.html">jseAPI</a></li><li><a href="module-jseASCII.html">jseASCII</a></li><li><a href="module-jseBackup.html">jseBackup</a></li><li><a href="module-jseBlockChain.html">jseBlockChain</a></li><li><a href="module-jseCommands.html">jseCommands</a></li><li><a href="module-jseDataIO.html">jseDataIO</a></li><li><a href="module-jseFunctions.html">jseFunctions</a></li><li><a href="module-jseLoader.html">jseLoader</a></li><li><a href="module-jseLottery.html">jseLottery</a></li><li><a href="module-jsePeerConnections.html">jsePeerConnections</a></li><li><a href="module-jseRouter.html">jseRouter</a></li><li><a href="module-jseSocketIO.html">jseSocketIO</a></li></ul><h3>Global</h3><ul><li><a href="global.html#fairReset">fairReset</a></li><li><a href="global.html#fairResetLong">fairResetLong</a></li><li><a href="global.html#genMinerAuthKey">genMinerAuthKey</a></li><li><a href="global.html#startP2P">startP2P</a></li><li><a href="global.html#startServers">startServers</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri May 25 2018 12:05:06 GMT+0100 (GMT Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>